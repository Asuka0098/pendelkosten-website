<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Berechnung der Pendelkosten</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #f6f8fa;
        }
        .container {
            max-width: 480px;
            margin: 40px auto 0 auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
            padding: 32px 32px 24px 32px;
            position: relative;
            z-index: 1;
        }
        .center {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            text-align: center;
            font-size: 2.1em;
            margin-bottom: 0.5em;
        }
        .illustration {
            display: flex;
            justify-content: center;
            margin-bottom: 18px;
        }
        label {
            display: block;
            margin-top: 10px;
            font-weight: 500;
        }
        input, select, button {
            margin-top: 5px;
            margin-bottom: 10px;
            width: 100%;
            font-size: 1em;
            border-radius: 6px;
            border: 1px solid #d0d7de;
            padding: 8px 10px;
            box-sizing: border-box;
        }
        input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }
        button, .oil-link {
            background: #0077cc;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        button:hover, .oil-link:hover {
            background: #005fa3;
        }
        .oil-link {
            display: inline-block;
            margin-left: 8px;
            padding: 8px 12px;
            text-decoration: none;
            font-size: 0.98em;
            border-radius: 6px;
        }
        .hidden { display: none; }
        .result {
            border: 1px solid #e0e4ea;
            background: #fafdff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            padding: 18px;
            margin-top: 20px;
            text-align: left;
        }
        .saved-results {
            margin-top: 30px;
        }
        .saved-item {
            border: 1px solid #e0e4ea;
            background: #fafdff;
            border-radius: 10px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.03);
            padding: 10px;
            margin-bottom: 10px;
        }
        @media (max-width: 600px) {
            .container { padding: 12px 2vw; }
        }
        /* è¯­è¨€é€‰æ‹©å™¨æ ·å¼ */
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .language-selector select {
            padding: 8px 12px;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            background: #fff;
            font-size: 0.9em;
            cursor: pointer;
        }
        @media (max-width: 600px) {
            .language-selector {
                top: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- è¯­è¨€é€‰æ‹©å™¨ -->
    <div class="language-selector">
        <select id="languageSelect">
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
            <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
            <option value="nl">ğŸ‡³ğŸ‡± Nederlands</option>
            <option value="pl">ğŸ‡µğŸ‡± Polski</option>
        </select>
    </div>
    <div class="container center">
        <div class="illustration">
            <!-- ç®€å•SVGæ’ç”»ï¼šåŸå¸‚+æ±½è½¦+å…¬äº¤ -->
            <svg width="120" height="60" viewBox="0 0 120 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="5" y="35" width="20" height="20" rx="3" fill="#b3d0f7"/>
                <rect x="30" y="25" width="18" height="30" rx="3" fill="#d1e7dd"/>
                <rect x="52" y="40" width="30" height="15" rx="5" fill="#f7c873"/>
                <circle cx="60" cy="55" r="4" fill="#888"/>
                <circle cx="78" cy="55" r="4" fill="#888"/>
                <rect x="90" y="38" width="22" height="12" rx="3" fill="#b3d0f7"/>
                <rect x="92" y="42" width="6" height="6" rx="1" fill="#fff"/>
                <rect x="104" y="42" width="6" height="6" rx="1" fill="#fff"/>
                <rect x="0" y="58" width="120" height="2" fill="#bbb"/>
            </svg>
        </div>
        <h1>Pendelkostenrechner</h1>
        <form id="commuteForm" style="width:100%;max-width:350px;">
            <label for="distance">Entfernung (einfach, km):
                <input type="number" id="distance" min="0.1" max="1000" step="0.1" required>
            </label>
            <label for="time">Gesamte Pendelzeit (Hin- und RÃ¼ckfahrt, Minuten):
                <input type="number" id="time" min="1" max="600" step="1" required>
            </label>
            <label for="commuteType">Verkehrsmittel:
                <select id="commuteType" required>
                    <option value="auto">Auto</option>
                    <option value="oeffentlich">Ã–ffentliche Verkehrsmittel</option>
                </select>
            </label>
            <div id="autoFields">
                <label for="fuelConsumption">Kraftstoffverbrauch (Liter/100km):
                    <input type="number" id="fuelConsumption" min="1" max="30" step="0.1">
                </label>
                <label for="fuelPrice">Kraftstoffpreis (â‚¬/Liter):
                    <input type="number" id="fuelPrice" min="0.5" max="10" step="0.01">
                    <button type="button" id="getFuelPriceBtn" style="margin-left: 10px; padding: 4px 8px; font-size: 0.8em; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">è·å–å®æ—¶æ²¹ä»·</button>
                </label>
                <div id="fuelPriceInfo" style="color: #007700; font-size: 0.95em;"></div>
            </div>
            <div id="oeffentlichFields" class="hidden">
                <label for="publicCost">Monatliche Kosten fÃ¼r Ã¶ffentliche Verkehrsmittel (â‚¬):
                    <input type="number" id="publicCost" min="0" max="1000" step="0.01">
                </label>
            </div>
            <label for="includeTimeCost" style="margin-top:16px;">
                <input type="checkbox" id="includeTimeCost"> Zeitkosten berechnen
            </label>
            <div id="salaryField" class="hidden">
                <label for="monthlySalary">Monatsnettogehalt (â‚¬):
                    <input type="number" id="monthlySalary" min="0" max="100000" step="0.01">
                </label>
                <label for="workDaysPerWeek">Arbeitstage pro Woche:
                    <input type="number" id="workDaysPerWeek" min="1" max="7" step="1" value="5">
                </label>
            </div>
            <label for="resultName">Ergebnisname:
                <input type="text" id="resultName" maxlength="30" pattern="[A-Za-z0-9 Ã¤Ã¶Ã¼Ã„Ã–ÃœÃŸ.,!?:;\-()]+" required>
            </label>
            <button type="submit" style="margin-top:18px;">Berechnen & Speichern</button>
        </form>

        <div id="result" class="result hidden"></div>

        <div class="saved-results" style="width:100%;max-width:350px;">
            <h2 style="text-align:center;">Gespeicherte Ergebnisse</h2>
            <div id="savedResults"></div>
        </div>
    </div>

    <script>
        // å¤šè¯­è¨€æ–‡æœ¬æ•°æ®
        const translations = {
            de: {
                title: "Berechnung der Pendelkosten",
                h1: "Pendelkostenrechner",
                distance: "Entfernung (einfach, km):",
                time: "Gesamte Pendelzeit (Hin- und RÃ¼ckfahrt, Minuten):",
                transport: "Verkehrsmittel:",
                auto: "Auto",
                public: "Ã–ffentliche Verkehrsmittel",
                fuelConsumption: "Kraftstoffverbrauch (Liter/100km):",
                fuelPrice: "Kraftstoffpreis (â‚¬/Liter):",
                getFuelPriceBtn: "Kraftstoffpreise abrufen",
                loadingBtn: "Laden...",
                loadingInfo: "Kraftstoffpreise werden abgerufen...",
                publicCost: "Monatliche Kosten fÃ¼r Ã¶ffentliche Verkehrsmittel (â‚¬):",
                includeTimeCost: "Zeitkosten berechnen",
                monthlySalary: "Monatsnettogehalt (â‚¬):",
                workDaysPerWeek: "Arbeitstage pro Woche:",
                resultName: "Ergebnisname:",
                calculateButton: "Berechnen & Speichern",
                savedResults: "Gespeicherte Ergebnisse",
                noResults: "Keine gespeicherten Ergebnisse.",
                result: "Ergebnis:",
                monthlyFuelCost: "Monatliche Kraftstoffkosten: â‚¬",
                monthlyPublicCost: "Monatliche Kosten fÃ¼r Ã¶ffentliche Verkehrsmittel: â‚¬",
                monthlyTimeCost: "Monatliche Zeitkosten: â‚¬",
                hourlyWage: "Stundenlohn: â‚¬",
                totalMonthlyCost: "Gesamte monatliche Pendelkosten: â‚¬",
                percentageOfSalary: "Das sind % Ihres Nettogehalts.",
                impressum: "Impressum",
                privacy: "Datenschutz",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "Bitte geben Sie eine gÃ¼ltige Entfernung (0.1-1000 km) ein.",
                invalidTime: "Bitte geben Sie eine gÃ¼ltige Pendelzeit (1-600 Minuten) ein.",
                invalidName: "UngÃ¼ltiger Ergebnisname. Keine Scripte erlaubt, max. 30 Zeichen.",
                invalidWorkDays: "Bitte geben Sie gÃ¼ltige Arbeitstage pro Woche (1-7) ein.",
                invalidFuelConsumption: "Bitte geben Sie einen gÃ¼ltigen Kraftstoffverbrauch (1-30 L/100km) ein.",
                invalidFuelPrice: "Bitte geben Sie einen gÃ¼ltigen Kraftstoffpreis (0.5-10 â‚¬/L) ein.",
                invalidPublicCost: "Bitte geben Sie gÃ¼ltige Kosten fÃ¼r Ã¶ffentliche Verkehrsmittel (0-1000 â‚¬) ein.",
                invalidSalary: "Bitte geben Sie ein gÃ¼ltiges Monatsnettogehalt (0-100000 â‚¬) ein."
            },
            en: {
                title: "Commute Cost Calculator",
                h1: "Commute Cost Calculator",
                distance: "Distance (one way, km):",
                time: "Total commute time (round trip, minutes):",
                transport: "Transportation:",
                auto: "Car",
                public: "Public Transport",
                fuelConsumption: "Fuel consumption (L/100km):",
                fuelPrice: "Fuel price ($/L):",
                getFuelPriceBtn: "Get Real-time Price",
                loadingBtn: "Loading...",
                loadingInfo: "Fetching real-time fuel prices...",
                publicCost: "Monthly cost for public transport ($):",
                includeTimeCost: "Calculate time cost",
                monthlySalary: "Monthly net salary ($):",
                workDaysPerWeek: "Work days per week:",
                resultName: "Result name:",
                calculateButton: "Calculate & Save",
                savedResults: "Saved Results",
                noResults: "No saved results.",
                result: "Result:",
                monthlyFuelCost: "Monthly fuel cost: $",
                monthlyPublicCost: "Monthly public transport cost: $",
                monthlyTimeCost: "Monthly time cost: $",
                hourlyWage: "Hourly wage: $",
                totalMonthlyCost: "Total monthly commute cost: $",
                percentageOfSalary: "That's % of your net salary.",
                impressum: "Imprint",
                privacy: "Privacy Policy",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "Please enter a valid distance (0.1-1000 km).",
                invalidTime: "Please enter a valid commute time (1-600 minutes).",
                invalidName: "Invalid result name. No scripts allowed, max. 30 characters.",
                invalidWorkDays: "Please enter valid work days per week (1-7).",
                invalidFuelConsumption: "Please enter a valid fuel consumption (1-30 L/100km).",
                invalidFuelPrice: "Please enter a valid fuel price (0.5-10 $/L).",
                invalidPublicCost: "Please enter valid public transport cost (0-1000 $).",
                invalidSalary: "Please enter a valid monthly net salary (0-100000 $)."
            },
            zh: {
                title: "é€šå‹¤æˆæœ¬è®¡ç®—å™¨",
                h1: "é€šå‹¤æˆæœ¬è®¡ç®—å™¨",
                distance: "è·ç¦»ï¼ˆå•ç¨‹ï¼Œå…¬é‡Œï¼‰ï¼š",
                time: "æ€»é€šå‹¤æ—¶é—´ï¼ˆå¾€è¿”ï¼Œåˆ†é’Ÿï¼‰ï¼š",
                transport: "äº¤é€šæ–¹å¼ï¼š",
                auto: "æ±½è½¦",
                public: "å…¬å…±äº¤é€š",
                fuelConsumption: "æ²¹è€—ï¼ˆå‡/100å…¬é‡Œï¼‰ï¼š",
                fuelPrice: "æ²¹ä»·ï¼ˆÂ¥/å‡ï¼‰ï¼š",
                getFuelPriceBtn: "è·å–å®æ—¶æ²¹ä»·",
                loadingBtn: "è·å–ä¸­...",
                loadingInfo: "æ­£åœ¨è·å–å®æ—¶æ²¹ä»·æ•°æ®...",
                publicCost: "å…¬å…±äº¤é€šæœˆè´¹ç”¨ï¼ˆÂ¥ï¼‰ï¼š",
                includeTimeCost: "è®¡ç®—æ—¶é—´æˆæœ¬",
                monthlySalary: "æœˆå‡€æ”¶å…¥ï¼ˆÂ¥ï¼‰ï¼š",
                workDaysPerWeek: "æ¯å‘¨å·¥ä½œå¤©æ•°ï¼š",
                resultName: "ç»“æœåç§°ï¼š",
                calculateButton: "è®¡ç®—å¹¶ä¿å­˜",
                savedResults: "å·²ä¿å­˜ç»“æœ",
                noResults: "æš‚æ— ä¿å­˜ç»“æœã€‚",
                result: "ç»“æœï¼š",
                monthlyFuelCost: "æœˆç‡ƒæ²¹è´¹ç”¨ï¼šÂ¥",
                monthlyPublicCost: "æœˆå…¬å…±äº¤é€šè´¹ç”¨ï¼šÂ¥",
                monthlyTimeCost: "æœˆæ—¶é—´æˆæœ¬ï¼šÂ¥",
                hourlyWage: "æ—¶è–ªï¼šÂ¥",
                totalMonthlyCost: "æœˆé€šå‹¤æ€»æˆæœ¬ï¼šÂ¥",
                percentageOfSalary: "å æ‚¨å‡€æ”¶å…¥çš„%ã€‚",
                impressum: "æ³•å¾‹å£°æ˜",
                privacy: "éšç§æ”¿ç­–",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "è¯·è¾“å…¥æœ‰æ•ˆè·ç¦»ï¼ˆ0.1-1000å…¬é‡Œï¼‰ã€‚",
                invalidTime: "è¯·è¾“å…¥æœ‰æ•ˆé€šå‹¤æ—¶é—´ï¼ˆ1-600åˆ†é’Ÿï¼‰ã€‚",
                invalidName: "æ— æ•ˆç»“æœåç§°ã€‚ä¸å…è®¸è„šæœ¬ï¼Œæœ€å¤š30ä¸ªå­—ç¬¦ã€‚",
                invalidWorkDays: "è¯·è¾“å…¥æœ‰æ•ˆæ¯å‘¨å·¥ä½œå¤©æ•°ï¼ˆ1-7ï¼‰ã€‚",
                invalidFuelConsumption: "è¯·è¾“å…¥æœ‰æ•ˆæ²¹è€—ï¼ˆ1-30å‡/100å…¬é‡Œï¼‰ã€‚",
                invalidFuelPrice: "è¯·è¾“å…¥æœ‰æ•ˆæ²¹ä»·ï¼ˆ0.5-10Â¥/å‡ï¼‰ã€‚",
                invalidPublicCost: "è¯·è¾“å…¥æœ‰æ•ˆå…¬å…±äº¤é€šè´¹ç”¨ï¼ˆ0-1000Â¥ï¼‰ã€‚",
                invalidSalary: "è¯·è¾“å…¥æœ‰æ•ˆæœˆå‡€æ”¶å…¥ï¼ˆ0-100000Â¥ï¼‰ã€‚"
            },
            fr: {
                title: "Calculateur de CoÃ»ts de Transport",
                h1: "Calculateur de CoÃ»ts de Transport",
                distance: "Distance (aller simple, km):",
                time: "Temps de trajet total (aller-retour, minutes):",
                transport: "Moyen de transport:",
                auto: "Voiture",
                public: "Transport public",
                fuelConsumption: "Consommation de carburant (L/100km):",
                fuelPrice: "Prix du carburant (â‚¬/L):",
                getFuelPriceBtn: "Obtenir le prix en temps rÃ©el",
                loadingBtn: "Chargement...",
                loadingInfo: "RÃ©cupÃ©ration des prix du carburant en temps rÃ©el...",
                publicCost: "CoÃ»t mensuel du transport public (â‚¬):",
                includeTimeCost: "Calculer le coÃ»t du temps",
                monthlySalary: "Salaire net mensuel (â‚¬):",
                workDaysPerWeek: "Jours de travail par semaine:",
                resultName: "Nom du rÃ©sultat:",
                calculateButton: "Calculer et Sauvegarder",
                savedResults: "RÃ©sultats SauvegardÃ©s",
                noResults: "Aucun rÃ©sultat sauvegardÃ©.",
                result: "RÃ©sultat:",
                monthlyFuelCost: "CoÃ»t mensuel du carburant: â‚¬",
                monthlyPublicCost: "CoÃ»t mensuel du transport public: â‚¬",
                monthlyTimeCost: "CoÃ»t mensuel du temps: â‚¬",
                hourlyWage: "Salaire horaire: â‚¬",
                totalMonthlyCost: "CoÃ»t total mensuel de transport: â‚¬",
                percentageOfSalary: "C'est % de votre salaire net.",
                impressum: "Mentions LÃ©gales",
                privacy: "Politique de ConfidentialitÃ©",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "Veuillez entrer une distance valide (0.1-1000 km).",
                invalidTime: "Veuillez entrer un temps de trajet valide (1-600 minutes).",
                invalidName: "Nom de rÃ©sultat invalide. Aucun script autorisÃ©, max. 30 caractÃ¨res.",
                invalidWorkDays: "Veuillez entrer des jours de travail valides par semaine (1-7).",
                invalidFuelConsumption: "Veuillez entrer une consommation de carburant valide (1-30 L/100km).",
                invalidFuelPrice: "Veuillez entrer un prix de carburant valide (0.5-10 â‚¬/L).",
                invalidPublicCost: "Veuillez entrer un coÃ»t de transport public valide (0-1000 â‚¬).",
                invalidSalary: "Veuillez entrer un salaire net mensuel valide (0-100000 â‚¬)."
            },
            es: {
                title: "Calculadora de Costos de Transporte",
                h1: "Calculadora de Costos de Transporte",
                distance: "Distancia (ida, km):",
                time: "Tiempo total de viaje (ida y vuelta, minutos):",
                transport: "Medio de transporte:",
                auto: "Coche",
                public: "Transporte pÃºblico",
                fuelConsumption: "Consumo de combustible (L/100km):",
                fuelPrice: "Precio del combustible (â‚¬/L):",
                getFuelPriceBtn: "Obtener precio en tiempo real",
                loadingBtn: "Cargando...",
                loadingInfo: "Obteniendo precios de combustible en tiempo real...",
                publicCost: "Costo mensual del transporte pÃºblico (â‚¬):",
                includeTimeCost: "Calcular costo del tiempo",
                monthlySalary: "Salario neto mensual (â‚¬):",
                workDaysPerWeek: "DÃ­as de trabajo por semana:",
                resultName: "Nombre del resultado:",
                calculateButton: "Calcular y Guardar",
                savedResults: "Resultados Guardados",
                noResults: "No hay resultados guardados.",
                result: "Resultado:",
                monthlyFuelCost: "Costo mensual de combustible: â‚¬",
                monthlyPublicCost: "Costo mensual de transporte pÃºblico: â‚¬",
                monthlyTimeCost: "Costo mensual del tiempo: â‚¬",
                hourlyWage: "Salario por hora: â‚¬",
                totalMonthlyCost: "Costo total mensual de transporte: â‚¬",
                percentageOfSalary: "Eso es % de su salario neto.",
                impressum: "Aviso Legal",
                privacy: "PolÃ­tica de Privacidad",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "Por favor ingrese una distancia vÃ¡lida (0.1-1000 km).",
                invalidTime: "Por favor ingrese un tiempo de viaje vÃ¡lido (1-600 minutos).",
                invalidName: "Nombre de resultado invÃ¡lido. No se permiten scripts, mÃ¡x. 30 caracteres.",
                invalidWorkDays: "Por favor ingrese dÃ­as de trabajo vÃ¡lidos por semana (1-7).",
                invalidFuelConsumption: "Por favor ingrese un consumo de combustible vÃ¡lido (1-30 L/100km).",
                invalidFuelPrice: "Por favor ingrese un precio de combustible vÃ¡lido (0.5-10 â‚¬/L).",
                invalidPublicCost: "Por favor ingrese un costo de transporte pÃºblico vÃ¡lido (0-1000 â‚¬).",
                invalidSalary: "Por favor ingrese un salario neto mensual vÃ¡lido (0-100000 â‚¬)."
            },
            it: {
                title: "Calcolatore Costi Trasporto",
                h1: "Calcolatore Costi Trasporto",
                distance: "Distanza (andata, km):",
                time: "Tempo totale di viaggio (andata e ritorno, minuti):",
                transport: "Mezzo di trasporto:",
                auto: "Auto",
                public: "Trasporto pubblico",
                fuelConsumption: "Consumo di carburante (L/100km):",
                fuelPrice: "Prezzo del carburante (â‚¬/L):",
                getFuelPriceBtn: "Ottieni prezzo in tempo reale",
                loadingBtn: "Caricamento...",
                loadingInfo: "Recupero dei prezzi del carburante in tempo reale...",
                publicCost: "Costo mensile del trasporto pubblico (â‚¬):",
                includeTimeCost: "Calcolare il costo del tempo",
                monthlySalary: "Stipendio netto mensile (â‚¬):",
                workDaysPerWeek: "Giorni di lavoro per settimana:",
                resultName: "Nome del risultato:",
                calculateButton: "Calcola e Salva",
                savedResults: "Risultati Salvati",
                noResults: "Nessun risultato salvato.",
                result: "Risultato:",
                monthlyFuelCost: "Costo mensile del carburante: â‚¬",
                monthlyPublicCost: "Costo mensile del trasporto pubblico: â‚¬",
                monthlyTimeCost: "Costo mensile del tempo: â‚¬",
                hourlyWage: "Stipendio orario: â‚¬",
                totalMonthlyCost: "Costo totale mensile di trasporto: â‚¬",
                percentageOfSalary: "Questo Ã¨ % del tuo stipendio netto.",
                impressum: "Note Legali",
                privacy: "Informativa sulla Privacy",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "Inserisci una distanza valida (0.1-1000 km).",
                invalidTime: "Inserisci un tempo di viaggio valido (1-600 minuti).",
                invalidName: "Nome risultato non valido. Script non consentiti, max. 30 caratteri.",
                invalidWorkDays: "Inserisci giorni di lavoro validi per settimana (1-7).",
                invalidFuelConsumption: "Inserisci un consumo di carburante valido (1-30 L/100km).",
                invalidFuelPrice: "Inserisci un prezzo del carburante valido (0.5-10 â‚¬/L).",
                invalidPublicCost: "Inserisci un costo del trasporto pubblico valido (0-1000 â‚¬).",
                invalidSalary: "Inserisci uno stipendio netto mensile valido (0-100000 â‚¬)."
            },
            nl: {
                title: "Woon-werkverkeer Kosten Calculator",
                h1: "Woon-werkverkeer Kosten Calculator",
                distance: "Afstand (enkele reis, km):",
                time: "Totale reistijd (heen en terug, minuten):",
                transport: "Vervoermiddel:",
                auto: "Auto",
                public: "Openbaar vervoer",
                fuelConsumption: "Brandstofverbruik (L/100km):",
                fuelPrice: "Brandstofprijs (â‚¬/L):",
                getFuelPriceBtn: "Real-time prijs ophalen",
                loadingBtn: "Laden...",
                loadingInfo: "Brandstofprijzen in real-time ophalen...",
                publicCost: "Maandelijkse kosten openbaar vervoer (â‚¬):",
                includeTimeCost: "Tijdkosten berekenen",
                monthlySalary: "Maandelijks nettoloon (â‚¬):",
                workDaysPerWeek: "Werkdagen per week:",
                resultName: "Resultaatnaam:",
                calculateButton: "Berekenen & Opslaan",
                savedResults: "Opgeslagen Resultaten",
                noResults: "Geen opgeslagen resultaten.",
                result: "Resultaat:",
                monthlyFuelCost: "Maandelijkse brandstofkosten: â‚¬",
                monthlyPublicCost: "Maandelijkse kosten openbaar vervoer: â‚¬",
                monthlyTimeCost: "Maandelijkse tijdkosten: â‚¬",
                hourlyWage: "Uurloon: â‚¬",
                totalMonthlyCost: "Totale maandelijkse reiskosten: â‚¬",
                percentageOfSalary: "Dat is % van je nettoloon.",
                impressum: "Colofon",
                privacy: "Privacybeleid",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "Voer een geldige afstand in (0.1-1000 km).",
                invalidTime: "Voer een geldige reistijd in (1-600 minuten).",
                invalidName: "Ongeldige resultaatnaam. Geen scripts toegestaan, max. 30 tekens.",
                invalidWorkDays: "Voer geldige werkdagen per week in (1-7).",
                invalidFuelConsumption: "Voer een geldig brandstofverbruik in (1-30 L/100km).",
                invalidFuelPrice: "Voer een geldige brandstofprijs in (0.5-10 â‚¬/L).",
                invalidPublicCost: "Voer geldige kosten voor openbaar vervoer in (0-1000 â‚¬).",
                invalidSalary: "Voer een geldig maandelijks nettoloon in (0-100000 â‚¬)."
            },
            pl: {
                title: "Kalkulator KosztÃ³w Dojazdu",
                h1: "Kalkulator KosztÃ³w Dojazdu",
                distance: "OdlegÅ‚oÅ›Ä‡ (w jednÄ… stronÄ™, km):",
                time: "CaÅ‚kowity czas dojazdu (w obie strony, minuty):",
                transport: "Åšrodek transportu:",
                auto: "SamochÃ³d",
                public: "Transport publiczny",
                fuelConsumption: "ZuÅ¼ycie paliwa (L/100km):",
                fuelPrice: "Cena paliwa (zÅ‚/L):",
                getFuelPriceBtn: "Pobierz cenÄ™ w czasie rzeczywistym",
                loadingBtn: "Åadowanie...",
                loadingInfo: "Pobieranie aktualnych cen paliw...",
                publicCost: "MiesiÄ™czny koszt transportu publicznego (zÅ‚):",
                includeTimeCost: "Oblicz koszt czasu",
                monthlySalary: "MiesiÄ™czne wynagrodzenie netto (zÅ‚):",
                workDaysPerWeek: "Dni robocze w tygodniu:",
                resultName: "Nazwa wyniku:",
                calculateButton: "Oblicz i Zapisz",
                savedResults: "Zapisane Wyniki",
                noResults: "Brak zapisanych wynikÃ³w.",
                result: "Wynik:",
                monthlyFuelCost: "MiesiÄ™czny koszt paliwa: zÅ‚",
                monthlyPublicCost: "MiesiÄ™czny koszt transportu publicznego: zÅ‚",
                monthlyTimeCost: "MiesiÄ™czny koszt czasu: zÅ‚",
                hourlyWage: "Stawka godzinowa: zÅ‚",
                totalMonthlyCost: "CaÅ‚kowity miesiÄ™czny koszt dojazdu: zÅ‚",
                percentageOfSalary: "To jest % twojego wynagrodzenia netto.",
                impressum: "Stopka Redakcyjna",
                privacy: "Polityka PrywatnoÅ›ci",
                // é”™è¯¯æ¶ˆæ¯
                invalidDistance: "WprowadÅº prawidÅ‚owÄ… odlegÅ‚oÅ›Ä‡ (0.1-1000 km).",
                invalidTime: "WprowadÅº prawidÅ‚owy czas dojazdu (1-600 minut).",
                invalidName: "NieprawidÅ‚owa nazwa wyniku. Skrypty niedozwolone, max. 30 znakÃ³w.",
                invalidWorkDays: "WprowadÅº prawidÅ‚owe dni robocze w tygodniu (1-7).",
                invalidFuelConsumption: "WprowadÅº prawidÅ‚owe zuÅ¼ycie paliwa (1-30 L/100km).",
                invalidFuelPrice: "WprowadÅº prawidÅ‚owÄ… cenÄ™ paliwa (0.5-10 zÅ‚/L).",
                invalidPublicCost: "WprowadÅº prawidÅ‚owy koszt transportu publicznego (0-1000 zÅ‚).",
                invalidSalary: "WprowadÅº prawidÅ‚owe miesiÄ™czne wynagrodzenie netto (0-100000 zÅ‚)."
            }
        };

        // å½“å‰è¯­è¨€
        let currentLanguage = 'de';

        // è¯­è¨€åˆ‡æ¢å‡½æ•°
        function changeLanguage(lang) {
            currentLanguage = lang;
            const t = translations[lang];
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜
            document.title = t.title;
            
            // æ›´æ–°é¡µé¢å†…å®¹
            document.querySelector('h1').textContent = t.h1;
            
            // æ›´æ–°è¡¨å•æ ‡ç­¾ - åªæ›´æ–°æ–‡æœ¬èŠ‚ç‚¹ï¼Œä¿ç•™è¾“å…¥å­—æ®µ
            const distanceLabel = document.querySelector('label[for="distance"]');
            if (distanceLabel) {
                // ä¿ç•™è¾“å…¥å­—æ®µï¼Œåªæ›´æ–°æ–‡æœ¬
                const input = distanceLabel.querySelector('input');
                distanceLabel.innerHTML = t.distance;
                if (input) distanceLabel.appendChild(input);
            }
            
            const timeLabel = document.querySelector('label[for="time"]');
            if (timeLabel) {
                const input = timeLabel.querySelector('input');
                timeLabel.innerHTML = t.time;
                if (input) timeLabel.appendChild(input);
            }
            
            const commuteTypeLabel = document.querySelector('label[for="commuteType"]');
            if (commuteTypeLabel) {
                const select = commuteTypeLabel.querySelector('select');
                commuteTypeLabel.innerHTML = t.transport;
                if (select) commuteTypeLabel.appendChild(select);
            }
            
            // æ›´æ–°é€‰é¡¹
            const autoOption = document.querySelector('#commuteType option[value="auto"]');
            if (autoOption) {
                autoOption.textContent = t.auto;
            }
            
            const publicOption = document.querySelector('#commuteType option[value="oeffentlich"]');
            if (publicOption) {
                publicOption.textContent = t.public;
            }
            
            // æ›´æ–°æ±½è½¦ç›¸å…³å­—æ®µæ ‡ç­¾
            const fuelConsumptionLabel = document.querySelector('label[for="fuelConsumption"]');
            if (fuelConsumptionLabel) {
                const input = fuelConsumptionLabel.querySelector('input');
                fuelConsumptionLabel.innerHTML = t.fuelConsumption;
                if (input) fuelConsumptionLabel.appendChild(input);
            }
            

            
            const fuelPriceLabel = document.querySelector('label[for="fuelPrice"]');
            if (fuelPriceLabel) {
                const input = fuelPriceLabel.querySelector('input');
                const button = fuelPriceLabel.querySelector('button');
                fuelPriceLabel.innerHTML = t.fuelPrice;
                if (input) fuelPriceLabel.appendChild(input);
                if (button) {
                    button.textContent = t.getFuelPriceBtn || 'è·å–å®æ—¶æ²¹ä»·';
                    fuelPriceLabel.appendChild(button);
                }
            }
            
            // æ›´æ–°å…¬å…±äº¤é€šå­—æ®µæ ‡ç­¾
            const publicCostLabel = document.querySelector('label[for="publicCost"]');
            if (publicCostLabel) {
                const input = publicCostLabel.querySelector('input');
                publicCostLabel.innerHTML = t.publicCost;
                if (input) publicCostLabel.appendChild(input);
            }
            
            // æ›´æ–°æ—¶é—´æˆæœ¬ç›¸å…³æ ‡ç­¾
            const timeCostLabel = document.querySelector('label[for="includeTimeCost"]');
            if (timeCostLabel) {
                const checkbox = timeCostLabel.querySelector('input');
                timeCostLabel.innerHTML = t.includeTimeCost;
                if (checkbox) timeCostLabel.appendChild(checkbox);
            }
            
            const salaryLabel = document.querySelector('label[for="monthlySalary"]');
            if (salaryLabel) {
                const input = salaryLabel.querySelector('input');
                salaryLabel.innerHTML = t.monthlySalary;
                if (input) salaryLabel.appendChild(input);
            }
            
            const workDaysLabel = document.querySelector('label[for="workDaysPerWeek"]');
            if (workDaysLabel) {
                const input = workDaysLabel.querySelector('input');
                workDaysLabel.innerHTML = t.workDaysPerWeek;
                if (input) workDaysLabel.appendChild(input);
            }
            
            // æ›´æ–°ç»“æœåç§°æ ‡ç­¾
            const resultNameLabel = document.querySelector('label[for="resultName"]');
            if (resultNameLabel) {
                const input = resultNameLabel.querySelector('input');
                resultNameLabel.innerHTML = t.resultName;
                if (input) resultNameLabel.appendChild(input);
            }
            
            // æ›´æ–°æŒ‰é’®
            const submitButton = document.querySelector('button[type="submit"]');
            if (submitButton) {
                submitButton.textContent = t.calculateButton;
            }
            
            // æ›´æ–°ä¿å­˜ç»“æœæ ‡é¢˜
            const savedResultsTitle = document.querySelector('.saved-results h2');
            if (savedResultsTitle) {
                savedResultsTitle.textContent = t.savedResults;
            }
            
            // æ›´æ–°é¡µè„šé“¾æ¥
            const impressumLink = document.getElementById('impressumLink');
            if (impressumLink) {
                impressumLink.textContent = t.impressum;
            }
            
            const datenschutzLink = document.getElementById('datenschutzLink');
            if (datenschutzLink) {
                datenschutzLink.textContent = t.privacy;
            }
            
            // é‡æ–°åŠ è½½ä¿å­˜çš„ç»“æœ
            loadResults();
        }

        // è¯­è¨€é€‰æ‹©å™¨äº‹ä»¶ç›‘å¬
        document.getElementById('languageSelect').addEventListener('change', function() {
            const selectedLang = this.value;
            localStorage.setItem('selectedLanguage', selectedLang);
            changeLanguage(selectedLang);
        });

        const commuteType = document.getElementById('commuteType');
        const autoFields = document.getElementById('autoFields');
        const oeffentlichFields = document.getElementById('oeffentlichFields');
        const includeTimeCost = document.getElementById('includeTimeCost');
        const salaryField = document.getElementById('salaryField');
        const form = document.getElementById('commuteForm');
        const resultDiv = document.getElementById('result');
        const savedResultsDiv = document.getElementById('savedResults');

        function updateFields() {
            if (commuteType.value === 'auto') {
                autoFields.classList.remove('hidden');
                oeffentlichFields.classList.add('hidden');
            } else {
                autoFields.classList.add('hidden');
                oeffentlichFields.classList.remove('hidden');
            }
        }
        commuteType.addEventListener('change', updateFields);
        updateFields();

        includeTimeCost.addEventListener('change', function() {
            if (this.checked) {
                salaryField.classList.remove('hidden');
            } else {
                salaryField.classList.add('hidden');
            }
        });

        function loadResults() {
            const results = JSON.parse(localStorage.getItem('commuteResults') || '[]');
            savedResultsDiv.innerHTML = '';
            if (results.length === 0) {
                const t = translations[currentLanguage];
                savedResultsDiv.innerHTML = `<em>${t.noResults}</em>`;
                return;
            }
            results.forEach(r => {
                savedResultsDiv.innerHTML += `<div class="saved-item"><strong>${r.name}</strong><br>${r.summary}</div>`;
            });
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const t = translations[currentLanguage];
            
            // æ ¡éªŒè¾“å…¥
            const distance = parseFloat(document.getElementById('distance').value);
            const time = parseFloat(document.getElementById('time').value);
            const type = commuteType.value;
            const name = document.getElementById('resultName').value.trim();
            if (isNaN(distance) || distance < 0.1 || distance > 1000) { alert(t.invalidDistance); return; }
            if (isNaN(time) || time < 1 || time > 600) { alert(t.invalidTime); return; }
            if (!name || name.length > 30 || /<\/?script/i.test(name)) { alert(t.invalidName); return; }
            let cost = 0, timeCost = 0, hourly = 0, monthlySalary = 0, summary = '';
            let workDays = 22; // é»˜è®¤
            if (includeTimeCost.checked) {
                const workDaysPerWeek = parseFloat(document.getElementById('workDaysPerWeek').value) || 5;
                if (isNaN(workDaysPerWeek) || workDaysPerWeek < 1 || workDaysPerWeek > 7) { alert(t.invalidWorkDays); return; }
                workDays = workDaysPerWeek * 4.33;
            }

            if (type === 'auto') {
                const fuelConsumption = parseFloat(document.getElementById('fuelConsumption').value);
                const fuelPrice = parseFloat(document.getElementById('fuelPrice').value);
                if (isNaN(fuelConsumption) || fuelConsumption < 1 || fuelConsumption > 30) { alert(t.invalidFuelConsumption); return; }
                if (isNaN(fuelPrice) || fuelPrice < 0.5 || fuelPrice > 10) { alert(t.invalidFuelPrice); return; }
                const totalDistance = distance * 2 * workDays;
                const fuelUsed = totalDistance * (fuelConsumption / 100);
                cost = fuelUsed * fuelPrice;
                summary += `${t.monthlyFuelCost}${cost.toFixed(2)}<br>`;
            } else {
                const publicCost = parseFloat(document.getElementById('publicCost').value);
                if (isNaN(publicCost) || publicCost < 0 || publicCost > 1000) { alert(t.invalidPublicCost); return; }
                cost = publicCost;
                summary += `${t.monthlyPublicCost}${cost.toFixed(2)}<br>`;
            }

            if (includeTimeCost.checked) {
                monthlySalary = parseFloat(document.getElementById('monthlySalary').value);
                if (isNaN(monthlySalary) || monthlySalary < 0 || monthlySalary > 100000) { alert(t.invalidSalary); return; }
                hourly = monthlySalary / (workDays * 8);
                timeCost = time * workDays * (hourly / 60);
                summary += `${t.monthlyTimeCost}${timeCost.toFixed(2)} (${t.hourlyWage}${hourly.toFixed(2)})<br>`;
            }

            const totalCost = cost + timeCost;
            summary += `<strong>${t.totalMonthlyCost}${totalCost.toFixed(2)}</strong><br>`;
            if (monthlySalary > 0) {
                const percent = (totalCost / monthlySalary) * 100;
                summary += `${t.percentageOfSalary.replace('%', (percent).toFixed(2) + '%')}`;
            }

            resultDiv.innerHTML = `<h3>${t.result} ${name}</h3>${summary}`;
            resultDiv.classList.remove('hidden');

            const results = JSON.parse(localStorage.getItem('commuteResults') || '[]');
            results.push({ name, summary });
            localStorage.setItem('commuteResults', JSON.stringify(results));
            loadResults();
        });

        loadResults();
        
        // æ²¹ä»·è·å–åŠŸèƒ½ - ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œé¿å…è¯­è¨€åˆ‡æ¢åå¤±æ•ˆ
        document.addEventListener('click', function(e) {
            if (e.target && e.target.id === 'getFuelPriceBtn') {
                getFuelPrice();
            }
        });
        
        // è·å–å®æ—¶æ²¹ä»·å‡½æ•°
        async function getFuelPrice() {
            const fuelPriceInfo = document.getElementById('fuelPriceInfo');
            const fuelPriceInput = document.getElementById('fuelPrice');
            const btn = document.getElementById('getFuelPriceBtn');
            
            // æ£€æŸ¥å¿…è¦å…ƒç´ æ˜¯å¦å­˜åœ¨
            if (!fuelPriceInfo || !fuelPriceInput || !btn) {
                console.error('æ²¹ä»·è·å–åŠŸèƒ½æ‰€éœ€çš„å…ƒç´ ä¸å­˜åœ¨:', {
                    fuelPriceInfo: !!fuelPriceInfo,
                    fuelPriceInput: !!fuelPriceInput,
                    btn: !!btn
                });
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const t = translations[currentLanguage];
            btn.textContent = t.loadingBtn || t.getFuelPriceBtn || 'Loading...';
            btn.disabled = true;
            fuelPriceInfo.textContent = t.loadingInfo || '';
            fuelPriceInfo.style.color = '#007700';
            
            try {
                // æ ¹æ®å½“å‰è¯­è¨€é€‰æ‹©å¯¹åº”çš„æ²¹ä»·æ•°æ®æº
                const currentLang = currentLanguage;
                let currency = 'â‚¬';
                let country = 'Germany';
                let countryName = 'Germany';
                
                // æ¨¡æ‹Ÿä¸åŒå›½å®¶çš„æ²¹ä»·æ•°æ®ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥è°ƒç”¨çœŸå®APIï¼‰
                const fuelPrices = {
                    'de': {
                        currency: 'â‚¬',
                        country: 'Germany',
                        countryName: 'å¾·å›½',
                        prices: {
                            'Benzin (95)': 1.85,
                            'Benzin (98)': 1.95,
                            'Diesel': 1.75,
                            'E10': 1.80
                        }
                    },
                    'en': {
                        currency: '$',
                        country: 'USA',
                        countryName: 'ç¾å›½',
                        prices: {
                            'Gasoline (95)': 3.50,
                            'Gasoline (98)': 3.80,
                            'Diesel': 3.20,
                            'E10': 3.30
                        }
                    },
                    'zh': {
                        currency: 'Â¥',
                        country: 'China',
                        countryName: 'ä¸­å›½',
                        prices: {
                            'æ±½æ²¹ï¼ˆ95å·ï¼‰': 7.20,
                            'æ±½æ²¹ï¼ˆ98å·ï¼‰': 7.80,
                            'æŸ´æ²¹': 6.50,
                            'E10ä¹™é†‡æ±½æ²¹': 6.80
                        }
                    },
                    'fr': {
                        currency: 'â‚¬',
                        country: 'France',
                        countryName: 'æ³•å›½',
                        prices: {
                            'Essence (95)': 1.90,
                            'Essence (98)': 2.00,
                            'Diesel': 1.80,
                            'E10': 1.85
                        }
                    },
                    'es': {
                        currency: 'â‚¬',
                        country: 'Spain',
                        countryName: 'è¥¿ç­ç‰™',
                        prices: {
                            'Gasolina (95)': 1.75,
                            'Gasolina (98)': 1.85,
                            'DiÃ©sel': 1.65,
                            'E10': 1.70
                        }
                    },
                    'it': {
                        currency: 'â‚¬',
                        country: 'Italy',
                        countryName: 'æ„å¤§åˆ©',
                        prices: {
                            'Benzina (95)': 1.88,
                            'Benzina (98)': 1.98,
                            'Diesel': 1.78,
                            'E10': 1.83
                        }
                    },
                    'nl': {
                        currency: 'â‚¬',
                        country: 'Netherlands',
                        countryName: 'è·å…°',
                        prices: {
                            'Benzine (95)': 1.92,
                            'Benzine (98)': 2.02,
                            'Diesel': 1.82,
                            'E10': 1.87
                        }
                    },
                    'pl': {
                        currency: 'zÅ‚',
                        country: 'Poland',
                        countryName: 'æ³¢å…°',
                        prices: {
                            'Benzyna (95)': 6.50,
                            'Benzyna (98)': 6.80,
                            'Diesel': 6.20,
                            'E10': 6.35
                        }
                    }
                };
                
                const countryData = fuelPrices[currentLang] || fuelPrices['de'];
                currency = countryData.currency;
                country = countryData.country;
                countryName = countryData.countryName;
                
                // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // ç”Ÿæˆæ‰€æœ‰ç‡ƒæ²¹ç±»å‹çš„ä»·æ ¼åˆ—è¡¨
                let priceList = '';
                Object.entries(countryData.prices).forEach(([fuelType, price]) => {
                    priceList += `${fuelType}: ${currency}${price.toFixed(2)}/L<br>`;
                });
                
                // è®¾ç½®é»˜è®¤ä»·æ ¼ä¸º95å·æ±½æ²¹ä»·æ ¼
                const defaultPrice = countryData.prices[Object.keys(countryData.prices)[0]];
                fuelPriceInput.value = defaultPrice.toFixed(2);
                
                // æ ¹æ®å½“å‰è¯­è¨€æ˜¾ç¤ºå¯¹åº”çš„æˆåŠŸä¿¡æ¯
                let successMessage = '';
                switch(currentLang) {
                    case 'de':
                        successMessage = `âœ… ${countryName} å½“å‰æ²¹ä»·:<br>${priceList}<small>æ•°æ®æ›´æ–°æ—¶é—´: ${new Date().toLocaleString('de-DE')}</small>`;
                        break;
                    case 'en':
                        successMessage = `âœ… ${countryName} current fuel prices:<br>${priceList}<small>Data updated: ${new Date().toLocaleString('en-US')}</small>`;
                        break;
                    case 'zh':
                        successMessage = `âœ… ${countryName} å½“å‰æ²¹ä»·:<br>${priceList}<small>æ•°æ®æ›´æ–°æ—¶é—´: ${new Date().toLocaleString('zh-CN')}</small>`;
                        break;
                    case 'fr':
                        successMessage = `âœ… ${countryName} prix actuels du carburant:<br>${priceList}<small>DonnÃ©es mises Ã  jour: ${new Date().toLocaleString('fr-FR')}</small>`;
                        break;
                    case 'es':
                        successMessage = `âœ… ${countryName} precios actuales del combustible:<br>${priceList}<small>Datos actualizados: ${new Date().toLocaleString('es-ES')}</small>`;
                        break;
                    case 'it':
                        successMessage = `âœ… ${countryName} prezzi attuali del carburante:<br>${priceList}<small>Dati aggiornati: ${new Date().toLocaleString('it-IT')}</small>`;
                        break;
                    case 'nl':
                        successMessage = `âœ… ${countryName} huidige brandstofprijzen:<br>${priceList}<small>Gegevens bijgewerkt: ${new Date().toLocaleString('nl-NL')}</small>`;
                        break;
                    case 'pl':
                        successMessage = `âœ… ${countryName} aktualne ceny paliwa:<br>${priceList}<small>Dane zaktualizowane: ${new Date().toLocaleString('pl-PL')}</small>`;
                        break;
                    default:
                        successMessage = `âœ… ${countryName} current fuel prices:<br>${priceList}<small>Data updated: ${new Date().toLocaleString()}</small>`;
                }
                
                fuelPriceInfo.innerHTML = successMessage;
                fuelPriceInfo.style.color = '#28a745';
                
            } catch (error) {
                // æ ¹æ®å½“å‰è¯­è¨€æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                let errorMessage = '';
                switch(currentLang) {
                    case 'de':
                        errorMessage = 'âŒ Fehler beim Abrufen der Kraftstoffpreise. Bitte manuell eingeben.';
                        break;
                    case 'en':
                        errorMessage = 'âŒ Failed to get fuel prices. Please enter manually.';
                        break;
                    case 'zh':
                        errorMessage = 'âŒ è·å–æ²¹ä»·å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥';
                        break;
                    case 'fr':
                        errorMessage = 'âŒ Ã‰chec de la rÃ©cupÃ©ration des prix du carburant. Veuillez saisir manuellement.';
                        break;
                    case 'es':
                        errorMessage = 'âŒ Error al obtener precios de combustible. Por favor ingrese manualmente.';
                        break;
                    case 'it':
                        errorMessage = 'âŒ Impossibile ottenere i prezzi del carburante. Inserisci manualmente.';
                        break;
                    case 'nl':
                        errorMessage = 'âŒ Kan brandstofprijzen niet ophalen. Voer handmatig in.';
                        break;
                    case 'pl':
                        errorMessage = 'âŒ Nie udaÅ‚o siÄ™ pobraÄ‡ cen paliwa. WprowadÅº rÄ™cznie.';
                        break;
                    default:
                        errorMessage = 'âŒ Failed to get fuel prices. Please enter manually.';
                }
                
                fuelPriceInfo.textContent = errorMessage;
                fuelPriceInfo.style.color = '#dc3545';
                console.error('è·å–æ²¹ä»·å¤±è´¥:', error);
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                const t = translations[currentLanguage];
                btn.textContent = t.getFuelPriceBtn || 'è·å–å®æ—¶æ²¹ä»·';
                btn.disabled = false;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–è¯­è¨€
        document.addEventListener('DOMContentLoaded', function() {
            // å°è¯•ä»localStorageè·å–ç”¨æˆ·ä¹‹å‰é€‰æ‹©çš„è¯­è¨€
            const savedLanguage = localStorage.getItem('selectedLanguage') || 'de';
            document.getElementById('languageSelect').value = savedLanguage;
            changeLanguage(savedLanguage);
        });
    </script>
    <!-- Footer with Impressum & Datenschutz -->
    <footer style="width:100%;background:#f6f8fa;border-top:1px solid #e0e4ea;margin-top:40px;padding:18px 0 10px 0;text-align:center;font-size:1em;">
        <a href="#" id="impressumLink" style="margin:0 18px;color:#0077cc;text-decoration:underline;">Impressum</a>
        <a href="#" id="datenschutzLink" style="margin:0 18px;color:#0077cc;text-decoration:underline;">Datenschutz</a>
    </footer>

    <!-- Impressum Modal -->
    <div id="impressumModal" style="display:none;position:fixed;z-index:1001;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);">
      <div class="modal-content" style="background:#fff;max-width:420px;margin:60px auto;padding:28px 24px 18px 24px;border-radius:12px;box-shadow:0 4px 24px rgba(0,0,0,0.12);position:relative;">
        <button id="closeImpressum" style="position:absolute;top:10px;right:16px;font-size:1.2em;background:none;border:none;cursor:pointer;">Ã—</button>
        <h2 style="margin-top:0">Impressum</h2>
        <p>Angaben gemÃ¤ÃŸ Â§ 5 TMG</p>
        <p>
          Max Mustermann<br>
          MusterstraÃŸe 1<br>
          12345 Musterstadt<br>
          Deutschland<br>
          E-Mail: info@example.com
        </p>
        <p>Verantwortlich fÃ¼r den Inhalt nach Â§ 55 Abs. 2 RStV:<br>
          Max Mustermann, Adresse wie oben
        </p>
      </div>
    </div>

    <!-- Datenschutz Modal -->
    <div id="datenschutzModal" style="display:none;position:fixed;z-index:1001;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.25);">
      <div class="modal-content" style="background:#fff;max-width:420px;margin:60px auto;padding:28px 24px 18px 24px;border-radius:12px;box-shadow:0 4px 24px rgba(0,0,0,0.12);position:relative;">
        <button id="closeDatenschutz" style="position:absolute;top:10px;right:16px;font-size:1.2em;background:none;border:none;cursor:pointer;">Ã—</button>
        <h2 style="margin-top:0">DatenschutzerklÃ¤rung</h2>
        <p>
          Wir nehmen den Schutz Ihrer persÃ¶nlichen Daten sehr ernst. Ihre Daten werden im Rahmen der gesetzlichen Vorschriften geschÃ¼tzt. Diese Website speichert keine personenbezogenen Daten, auÃŸer Sie geben diese freiwillig ein (z.B. fÃ¼r Berechnungen). Es werden keine Daten an Dritte weitergegeben.
        </p>
        <p>
          Bei Fragen wenden Sie sich bitte an: info@example.com
        </p>
      </div>
    </div>

    <script>
      document.getElementById('impressumLink').onclick = function(e) { e.preventDefault(); document.getElementById('impressumModal').style.display = 'block'; };
      document.getElementById('datenschutzLink').onclick = function(e) { e.preventDefault(); document.getElementById('datenschutzModal').style.display = 'block'; };
      // å…³é—­æŒ‰é’®äº‹ä»¶
      document.getElementById('closeImpressum').onclick = function() { document.getElementById('impressumModal').style.display = 'none'; };
      document.getElementById('closeDatenschutz').onclick = function() { document.getElementById('datenschutzModal').style.display = 'none'; };
      // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
      document.getElementById('impressumModal').onclick = function(e) {
        if (e.target === this) this.style.display = 'none';
      };
      document.getElementById('datenschutzModal').onclick = function(e) {
        if (e.target === this) this.style.display = 'none';
      };
    </script>
</body>
</html> 